# MicroTouch

MicroTouch æ˜¯ä¸€ä¸ªæè‡´ç®€çº¦è€ŒåŠŸèƒ½å¼ºå¤§çš„ç°ä»£åŒ–å…¨æ ˆå·¥å…·ç®±ï¼Œæ—¨åœ¨æä¾›æè‡´çš„ç”¨æˆ·ä½“éªŒå’Œé«˜æ•ˆçš„ç”Ÿäº§åŠ›å·¥å…·é›†ã€‚

![Project Preview](/public/image/README_preview.png)

## âœ¨ æ ¸å¿ƒæ¨¡å—

### 1. ğŸŸ¢ å¾®ä¿¡å…¬ä¼—å·å·¥å…·ç®± (WeChat Nexus)
- **æ™ºèƒ½æœç´¢**ï¼šæ”¯æŒå…¨ç½‘å¾®ä¿¡å…¬ä¼—å·æœç´¢ï¼Œå®æ—¶è·å–è®¤è¯ä¿¡æ¯ã€å¤´åƒåŠç®€ä»‹ã€‚
- **æ·±åº¦æå–**ï¼šä¸€é”®å°†å¾®ä¿¡æ–‡ç« è§£æä¸ºé«˜è´¨é‡ Markdownï¼Œè‡ªåŠ¨å¤„ç†å›¾ç‰‡é˜²ç›—é“¾ï¼Œå½»åº•è§£å†³"è£‚å›¾"çƒ¦æ¼ã€‚
- **æ‰¹é‡å¤„ç†**ï¼šæ”¯æŒæ–‡ç« æ‰¹é‡é€‰æ‹©ä¸å¿«é€Ÿå¯¼å‡ºï¼Œæå¤§æå‡å†…å®¹é‡‡é›†æ•ˆç‡ã€‚
- **å…³é”®è¯æ£€ç´¢**ï¼šåœ¨ç‰¹å®šå…¬ä¼—å·çš„å†å²å†…å®¹ä¸­è¿›è¡Œç²¾å‡†å…³é”®è¯æœç´¢ã€‚

### 2. ğŸ§  æ™ºèƒ½çŸ¥è¯†åº“ (Knowledge Hub)
- **å¤šæ ¼å¼æ”¯æŒ**ï¼šæ”¯æŒ PDFã€Word (Docx)ã€TXT ç­‰å¤šç§æ–‡æ¡£æ ¼å¼ä¸Šä¼ ã€‚
- **è¯­ä¹‰æœç´¢**ï¼šåŸºäºå‘é‡æ£€ç´¢æŠ€æœ¯ï¼Œå®ç°è¶…è¶Šå…³é”®è¯åŒ¹é…çš„æ™ºèƒ½è¯­ä¹‰æœç´¢ã€‚
- **çŸ¥è¯†ç®¡ç†**ï¼šæ„å»ºç§æœ‰çŸ¥è¯†åº“ï¼Œæ”¯æŒå¤§è§„æ¨¡æ–‡æ¡£çš„å¿«é€Ÿç´¢å¼•ä¸æŸ¥è¯¢ã€‚

### 3. ğŸ¤– æ™ºèƒ½ä½“æœç´¢ç³»ç»Ÿ (Agent Nexus) â­ NEW
- **ä¸‰ Agent åä½œ**ï¼šPlan Agentï¼ˆè§„åˆ’ï¼‰â†’ ReAct Agentï¼ˆæ‰§è¡Œï¼‰â†’ Review Agentï¼ˆå®¡æ ¸ï¼‰
- **æ™ºèƒ½æ•°æ®æº**ï¼šæ•´åˆå¾®ä¿¡å…¬ä¼—å·ã€çŸ¥è¯†åº“ã€RSS è®¢é˜…æºï¼ŒAI è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜æœç´¢ç­–ç•¥
- **åŒæ¨¡å¼æŠ¥å‘Š**ï¼š
  - **æ·±åº¦ç ”ç©¶æŠ¥å‘Š**ï¼šå¤šè½®æœç´¢ã€å…¨é¢åˆ†æï¼Œçº¦ 2000 å­—
  - **ç®€è¦æ—¥æŠ¥**ï¼šå¿«é€Ÿæ‘˜è¦ã€å¸¦é“¾æ¥ï¼Œçº¦ 500 å­—
- **å¤šæ¸ é“æ¨é€**ï¼šæ”¯æŒé‚®ä»¶ã€é£ä¹¦ã€åº”ç”¨å†…é€šçŸ¥è‡ªåŠ¨æ¨é€
- **é»˜è®¤ RSS æº**ï¼š36æ°ªã€è™å—…ç½‘ã€ITä¹‹å®¶ã€InfoQ AI

### 4. ğŸ¨ æè‡´è§†è§‰ä½“éªŒ
- **Antigravity èƒŒæ™¯**ï¼šé›†æˆåŸºäº Three.js çš„åŠ¨åŠ›å­¦ç²’å­èƒŒæ™¯ï¼Œéšé¼ æ ‡äº¤äº’äº§ç”Ÿå®æ—¶ç‰©ç†åé¦ˆã€‚
- **ç°ä»£ UI è®¾è®¡**ï¼šé‡‡ç”¨ Glassmorphismï¼ˆç»ç’ƒæ‹Ÿæ€ï¼‰ã€æ¸å˜å…‰æ™•å’Œ 3D å€¾æ–œå¡ç‰‡ (Tilted Card) è®¾è®¡ï¼Œæä¾›é«˜ç«¯çš„è§†è§‰å†²å‡»ã€‚

## ğŸ›  æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: [Next.js 15](https://nextjs.org/) (App Router & Turbopack)
- **å›¾å½¢**: [Three.js](https://threejs.org/) & [React Three Fiber](https://r3f.docs.pmnd.rs/getting-started/introduction)
- **æ ·å¼**: [Tailwind CSS](https://tailwindcss.com/)
- **ç»„ä»¶**: [Shadcn UI](https://ui.shadcn.com/) & [Lucide Icons](https://lucide.dev/)
- **æ–‡æœ¬å¤„ç†**: react-markdown, mammoth (Docx), pdf-parse
- **AI/LLM**: å¤šæä¾›å•†æ”¯æŒ (OpenAIã€é€šä¹‰åƒé—®ã€DeepSeekã€Kimiã€ModelScope)
- **æ•°æ®åº“**: [Supabase](https://supabase.com/) (PostgreSQL)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†å¹¶å®‰è£…
```bash
git clone https://github.com/HeteroCat/microtouch.git
cd microtouch
npm install
```

### 2. é…ç½®ç¯å¢ƒ
åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```env
# ========== Supabase æ•°æ®åº“ ==========
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
DATABASE_URL=postgresql://...

# ========== LLM (é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ª) ==========
# OpenAI
OPENAI_API_KEY=sk-...

# é€šä¹‰åƒé—®
DASHSCOPE_API_KEY=sk-...

# DeepSeek
DEEPSEEK_API_KEY=sk-...

# Kimi (Moonshot)
MOONSHOT_API_KEY=sk-...

# ModelScope
MODELSCOPE_API_KEY=...

# ========== å¾®ä¿¡ API ==========
WECHAT_API_KEY=your_api_key_here
WECHAT_API_BASE_URL=https://api.example.com

# ========== é‚®ä»¶æ¨é€ (å¯é€‰) ==========
RESEND_API_KEY=re_...

# ========== é£ä¹¦æ¨é€ (å¯é€‰) ==========
FEISHU_WEBHOOK_URL=https://open.feishu.cn/...
```

### 3. åˆå§‹åŒ–æ•°æ®åº“

é¦–æ¬¡ä½¿ç”¨éœ€è¦åˆå§‹åŒ– Supabase æ•°æ®åº“è¡¨ï¼š

```bash
# è¿è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
# æˆ–é€šè¿‡ Supabase Dashboard æ‰§è¡Œ lib/agent/init-db.sql ä¸­çš„ SQL
```

### 4. æœ¬åœ°å¯åŠ¨
```bash
npm run dev
```
è®¿é—® [http://localhost:3000](http://localhost:3000) å¼€å¯ä½“éªŒã€‚

## ğŸ“‚ ç›®å½•ç»“æ„

```
microtouch/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ product/           # æ ¸å¿ƒåŠŸèƒ½é¡µé¢
â”‚   â”‚   â”œâ”€â”€ wechat/        # å¾®ä¿¡å…¬ä¼—å·æœç´¢
â”‚   â”‚   â”œâ”€â”€ knowledge/     # çŸ¥è¯†åº“ç®¡ç†
â”‚   â”‚   â””â”€â”€ agent/         # æ™ºèƒ½ä½“æœç´¢ â­
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ agent/         # æ™ºèƒ½ä½“ API æ¥å£ â­
â”‚   â”‚   â”œâ”€â”€ rss/           # RSS æŠ“å–æ¥å£ â­
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ layout.tsx
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Antigravity/       # Three.js åŠ¨æ€èƒŒæ™¯
â”‚   â”œâ”€â”€ ui/                # Shadcn UI ç»„ä»¶
â”‚   â””â”€â”€ ...
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ agent/             # æ™ºèƒ½ä½“ç³»ç»Ÿ â­ NEW
â”‚   â”‚   â”œâ”€â”€ agents/        # Plan/ReAct/Review Agent
â”‚   â”‚   â”œâ”€â”€ tools/         # æœç´¢å·¥å…· (WeChat/Knowledge/RSS)
â”‚   â”‚   â”œâ”€â”€ orchestrator.ts
â”‚   â”‚   â”œâ”€â”€ push-manager.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ wechat/            # å¾®ä¿¡ API å°è£…
â”‚   â”œâ”€â”€ knowledge/         # çŸ¥è¯†åº“å¤„ç†
â”‚   â”œâ”€â”€ db-queries.ts      # æ•°æ®åº“æŸ¥è¯¢ â­
â”‚   â””â”€â”€ utils.ts
â”œâ”€â”€ data/                  # æœ¬åœ°æ•°æ®å­˜å‚¨
â””â”€â”€ public/
    â””â”€â”€ image/
```

## ğŸ”Œ æ™ºèƒ½ä½“ç³»ç»Ÿ API

### æ‰§è¡Œæ™ºèƒ½ä½“æœç´¢

```bash
# POST è¯·æ±‚
curl -X POST http://localhost:3000/api/agent/search \
  -H "Content-Type: application/json" \
  -d '{
    "query": "AI å¤§æ¨¡å‹æœ€æ–°è¶‹åŠ¿",
    "userId": "user-123",
    "mode": "full",
    "reportType": "deep-research"
  }'
```

### æ•°æ®æºç®¡ç†

```bash
# è·å–ç”¨æˆ·æ•°æ®æº
GET /api/agent/sources?userId=user-123

# æ·»åŠ  RSS æº
POST /api/agent/sources
{
  "userId": "user-123",
  "type": "rss",
  "name": "TechCrunch",
  "config": { "url": "https://techcrunch.com/feed/" }
}
```

### åˆå§‹åŒ–é»˜è®¤é…ç½®

```bash
# åˆå§‹åŒ–é»˜è®¤ RSS æº
POST /api/agent/init
{
  "userId": "user-123",
  "initDefaults": true
}
```

## ğŸ“– æ™ºèƒ½ä½“ç³»ç»Ÿæ–‡æ¡£

è¯¦ç»†æ–‡æ¡£è¯·æŸ¥çœ‹ [lib/agent/README.md](lib/agent/README.md)

### å·¥ä½œæµç¨‹

```
ç”¨æˆ·æŸ¥è¯¢
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Plan Agent   â”‚ â†’ åˆ†ææ„å›¾ã€æ£€æŸ¥é…ç½®ã€åˆ¶å®šè®¡åˆ’
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“ Plan
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ReAct Agent  â”‚ â†’ è°ƒç”¨å·¥å…·ã€å¤šæ­¥æ¨ç†ã€ç”Ÿæˆç»“æœ
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“ Result
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Review Agent  â”‚ â†’ è´¨é‡å®¡æ ¸ã€å†³å®šæ¨é€/è¿”å·¥
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“ Push
   é‚®ä»¶/é£ä¹¦/App
```

### æ”¯æŒçš„æ•°æ®æº

| ç±»å‹ | è¯´æ˜ | é»˜è®¤æº |
|------|------|--------|
| **wechat** | å¾®ä¿¡å…¬ä¼—å·æ–‡ç«  | å…¨ç½‘æœç´¢ |
| **knowledge** | ç”¨æˆ·çŸ¥è¯†åº“ | è¯­ä¹‰æœç´¢ |
| **rss** | RSS è®¢é˜…æº | 36æ°ªã€è™å—…ã€ITä¹‹å®¶ã€InfoQ |

### æŠ¥å‘Šç±»å‹å¯¹æ¯”

| ç‰¹æ€§ | æ·±åº¦ç ”ç©¶ | ç®€è¦æ—¥æŠ¥ |
|------|----------|----------|
| æœç´¢æ·±åº¦ | 3 è½® | 1 è½® |
| æ—¶é—´èŒƒå›´ | 30 å¤© | 7 å¤© |
| æŠ¥å‘Šé•¿åº¦ | ~2000 å­— | ~500 å­— |
| é€‚ç”¨åœºæ™¯ | å¤æ‚é—®é¢˜åˆ†æ | å¿«é€Ÿè·å–åŠ¨æ€ |

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ è‡ªå®šä¹‰æ•°æ®æº

1. åˆ›å»ºæ–°çš„ Tool ç±»ç»§æ‰¿ `Tool` æ¥å£
2. å®ç° `execute()` æ–¹æ³•
3. æ³¨å†Œåˆ° `ToolRegistry`

ç¤ºä¾‹ï¼š

```typescript
import { Tool } from '@/lib/agent';

class CustomSourceTool implements Tool {
  name = 'custom_source';
  description = 'è‡ªå®šä¹‰æ•°æ®æº';

  async execute(params: any) {
    // å®ç°æœç´¢é€»è¾‘
    return { items: [], total: 0 };
  }
}

// æ³¨å†Œ
tools.registerTool(new CustomSourceTool());
```

### æ·»åŠ æ–°çš„æ¨é€æ¸ é“

åœ¨ `lib/agent/push-manager.ts` ä¸­æ·»åŠ æ¨é€æ–¹æ³•ï¼š

```typescript
async sendCustom(config: any, content: PushContent) {
  // å®ç°æ¨é€é€»è¾‘
}
```

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

æœ¬é¡¹ç›®åŸºäºä»¥ä¸‹å¼€æºé¡¹ç›®æ„å»ºï¼š
- [Next.js](https://nextjs.org/)
- [Three.js](https://threejs.org/)
- [Shadcn UI](https://ui.shadcn.com/)
- [Supabase](https://supabase.com/)
